
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../cluster-configuration/">
      
      
        <link rel="next" href="../external-auth/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Create a cluster - ARO HCP Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/override.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#create-a-cluster" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ARO HCP Documentation" class="md-header__button md-logo" aria-label="ARO HCP Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ARO HCP Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Create a cluster
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bhardesty/aro-hcp-doc-demo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../introduction/" class="md-tabs__link">
          
  
  
  User docs

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ARO HCP Documentation" class="md-nav__button md-logo" aria-label="ARO HCP Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ARO HCP Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bhardesty/aro-hcp-doc-demo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User docs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service-def/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service definition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Set up clusters
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Set up clusters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview of cluster configuration choices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Create a cluster
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Create a cluster
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-bicep-file" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Bicep file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-cluster-using-bicep" class="md-nav__link">
    <span class="md-ellipsis">
      Create the cluster using Bicep
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Access the cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clean-up" class="md-nav__link">
    <span class="md-ellipsis">
      Clean up
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Manage clusters
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Manage clusters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../external-auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configure an external authentication provider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../add-pull-secrets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add pull secrets to access private registries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resize-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resize a cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade a cluster
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Monitor clusters
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Monitor clusters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../get-audit-logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get audit logs from Shoebox
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-bicep-file" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Bicep file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-cluster-using-bicep" class="md-nav__link">
    <span class="md-ellipsis">
      Create the cluster using Bicep
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Access the cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clean-up" class="md-nav__link">
    <span class="md-ellipsis">
      Clean up
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="create-a-cluster">Create a cluster<a class="headerlink" href="#create-a-cluster" title="Permanent link">&para;</a></h1>
<p>Microsoft Azure Red Hat OpenShift with hosted control planes is a managed OpenShift service that lets you quickly deploy and manage clusters. With Azure Red Hat OpenShift with hosted control planes, each cluster has a dedicated control plane that is isolated in an Azure service account.</p>
<p>This article shows you how to deploy an Azure Red Hat OpenShift with hosted control planes cluster using a Bicep file.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>Before deploying an Microsoft Azure Red Hat OpenShift with hosted control planes cluster, verify each of the following prerequisites.</p>
<h3 id="azure-cli-requirement">Azure CLI requirement<a class="headerlink" href="#azure-cli-requirement" title="Permanent link">&para;</a></h3>
<p>Ensure you're using Azure CLI version 2.67.0 or higher. Use <code>az --version</code> to find the version of Azure CLI you installed. If you need to install or upgrade, see <a href="https://learn.microsoft.com/en-us/cli/azure/install-azure-cli">Install Azure CLI</a>.</p>
<h3 id="verify-resource-quota">Verify resource quota<a class="headerlink" href="#verify-resource-quota" title="Permanent link">&para;</a></h3>
<p>Ensure you have enough resource quota. Azure Red Hat OpenShift with hosted control planes requires a minimum of 20 cores to create and run an OpenShift cluster. The default Azure resource quota for a new Azure subscription doesn't meet the minimum cores requirement. To request an increase in your resource limit, see <a href="https://learn.microsoft.com/en-us/azure/azure-portal/supportability/per-vm-quota-requests">Standard quota: Increase limits by VM series</a>.</p>
<p>For example, to check the current subscription quota of the smallest supported virtual machine family SKU "Standard DSv5":</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span><span class="nv">LOCATION</span><span class="o">=</span>eastus
<span class="gp">$ </span>az<span class="w"> </span>vm<span class="w"> </span>list-usage<span class="w"> </span>-l<span class="w"> </span><span class="nv">$LOCATION</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span><span class="s2">&quot;[?contains(name.value, &#39;standardDSv5Family&#39;)]&quot;</span><span class="w"> </span>-o<span class="w"> </span>table
</code></pre></div>
<h3 id="verify-permissions">Verify permissions<a class="headerlink" href="#verify-permissions" title="Permanent link">&para;</a></h3>
<p>In this article, you create a resource group which contains the virtual network and managed identities for the cluster. To create a resource group, you need Contributor and User Access Administrator permissions or Owner permissions on the resource group or subscription containing it. For more information, see <a href="https://learn.microsoft.com/en-us/azure/openshift/howto-create-openshift-cluster?tabs=bicep#verify-your-permissions">Verify your permissions</a>.</p>
<h3 id="register-resource-providers">Register resource providers<a class="headerlink" href="#register-resource-providers" title="Permanent link">&para;</a></h3>
<p>The following resource providers must be registered in your Azure subscription:</p>
<ul>
<li><code>Microsoft.RedHatOpenShift</code>  </li>
<li><code>Microsoft.Compute</code>  </li>
<li><code>Microsoft.Storage</code>  </li>
<li><code>Microsoft.Authorization</code></li>
</ul>
<p>For more information about how to register any of these resource providers, see <a href="https://learn.microsoft.com/en-us/azure/openshift/create-cluster?tabs=azure-cli#register-the-resource-providers">Register the resource providers</a>.</p>
<h2 id="create-a-bicep-file">Create a Bicep file<a class="headerlink" href="#create-a-bicep-file" title="Permanent link">&para;</a></h2>
<p>Create a Bicep file that defines an Azure Red Hat OpenShift with hosted control planes cluster.</p>
<h3 id="default-resources-to-define">Default resources to define<a class="headerlink" href="#default-resources-to-define" title="Permanent link">&para;</a></h3>
<p>To create an Azure Red Hat OpenShift with hosted control planes cluster, you must define the following resources:</p>
<ul>
<li>Network Security Group (NSG)  </li>
<li>Virtual network with an empty subnet  </li>
<li>A user-assigned managed identity and role assignment for each OpenShift cluster Operator  </li>
<li>A service managed identity and role assignments  </li>
<li>Hosted control plane (<code>Microsoft.RedHatOpenShift/hcpOpenShiftClusters</code> resource type)  </li>
<li>Node pool (<code>Microsoft.RedHatOpenShift/hcpOpenShiftClusters/nodePools</code> resource type)</li>
</ul>
<h3 id="resources-to-define-for-customer-managed-etcd-encryption">Resources to define for customer-managed etcd encryption<a class="headerlink" href="#resources-to-define-for-customer-managed-etcd-encryption" title="Permanent link">&para;</a></h3>
<p>If you want to use your own key to encrypt etcd, you must also define these additional resources:</p>
<ul>
<li>Azure Key Vault</li>
<li>Custom KMS key to encrypt the etcd database</li>
<li>A user-assigned managed identity to access the KMS key, and a role assignment that grants Key Vault permissions</li>
<li>A role assignment that grants <code>Reader</code> permissions to the service managed identity </li>
</ul>
<h3 id="example-bicep-file">Example Bicep file<a class="headerlink" href="#example-bicep-file" title="Permanent link">&para;</a></h3>
<p>This example Bicep file defines a cluster that uses a custom KMS key to encrypt the etcd database. You can customize the cluster and node pool configuration properties as needed.</p>
<div class="admonition example">
<p class="admonition-title">Example <code>azuredeploy.bicep</code> file</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span></pre></div></td><td class="code"><div><pre><span></span><code>@description(&#39;Network Security Group Name&#39;)
param customerNsgName string

@description(&#39;Virtual Network Name&#39;)
param customerVnetName string

@description(&#39;Subnet Name&#39;)
param customerVnetSubnetName string

@description(&#39;Name of the hypershift cluster&#39;)
param clusterName string

@description(&#39;The Hypershift cluster managed resource group name&#39;)
param managedResourceGroupName string

@description(&#39;The name of the node pool&#39;)
param nodePoolName string

var etcdEncryptionKeyName = &#39;etcd-data-kms-encryption-key&#39;
var randomSuffix = toLower(uniqueString(clusterName))
var randomKeyVaultSuffix = toLower(uniqueString(resourceGroup().id))
var customerKeyVaultName string = &#39;cust-kv-${randomKeyVaultSuffix}&#39;
var addressPrefix = &#39;10.0.0.0/16&#39;
var subnetPrefix = &#39;10.0.0.0/24&#39;

resource customerNsg &#39;Microsoft.Network/networkSecurityGroups@2023-05-01&#39; = {
  name: customerNsgName
  location: resourceGroup().location
  tags: {
    persist: &#39;true&#39;
  }
}

resource customerVnet &#39;Microsoft.Network/virtualNetworks@2023-05-01&#39; = {
  name: customerVnetName
  location: resourceGroup().location
  tags: {
    persist: &#39;true&#39;
  }
  properties: {
    addressSpace: {
      addressPrefixes: [
        addressPrefix
      ]
    }
    subnets: [
      {
        name: customerVnetSubnetName
        properties: {
          addressPrefix: subnetPrefix
          networkSecurityGroup: {
            id: customerNsg.id
          }
        }
      }
    ]
  }
}

resource subnet &#39;Microsoft.Network/virtualNetworks/subnets@2022-07-01&#39; existing = {
  name: customerVnetSubnetName
  parent: customerVnet
}

resource customerKeyVault &#39;Microsoft.KeyVault/vaults@2024-12-01-preview&#39; = {
  name: customerKeyVaultName
  location: resourceGroup().location
  properties: {
    enableRbacAuthorization: true
    enableSoftDelete: false
    tenantId: subscription().tenantId
    sku: {
      family: &#39;A&#39;
      name: &#39;standard&#39;
    }
  }
}

resource etcdEncryptionKey &#39;Microsoft.KeyVault/vaults/keys@2024-12-01-preview&#39; = {
  parent: customerKeyVault
  name: &#39;etcd-data-kms-encryption-key&#39;
  properties: {
    kty: &#39;RSA&#39;
    keySize: 2048
  }
}

//
// C O N T R O L   P L A N E   I D E N T I T I E S
//

// Reader
var readerRoleId = subscriptionResourceId(
  &#39;Microsoft.Authorization/roleDefinitions&#39;,
  &#39;acdd72a7-3385-48ef-bd42-f606fba81ae7&#39;
)

//
// C L U S T E R   A P I   A Z U R E   M I
//

resource clusterApiAzureMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-cp-cluster-api-azure-${randomSuffix}&#39;
  location: resourceGroup().location
}

// Azure Red Hat OpenShift Hosted Control Planes Cluster API Provider
var hcpClusterApiProviderRoleId = subscriptionResourceId(
  &#39;Microsoft.Authorization/roleDefinitions&#39;,
  &#39;88366f10-ed47-4cc0-9fab-c8a06148393e&#39;
)

resource hcpClusterApiProviderRoleSubnetAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, clusterApiAzureMi.id, hcpClusterApiProviderRoleId, subnet.id)
  scope: subnet
  properties: {
    principalId: clusterApiAzureMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: hcpClusterApiProviderRoleId
  }
}

resource serviceManagedIdentityReaderOnClusterApiAzureMi &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, readerRoleId, clusterApiAzureMi.id)
  scope: clusterApiAzureMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: readerRoleId
  }
}

//
// K M S   M I
//

resource kmsMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-cp-kms-${randomSuffix}&#39;
  location: resourceGroup().location
}

// Key Vault Crypto User
var keyVaultCryptoUserRoleId = subscriptionResourceId(
  &#39;Microsoft.Authorization/roleDefinitions&#39;,
  &#39;12338af0-0e69-4776-bea7-57ae8d297424&#39;
)

resource keyVaultCryptoUserToKeyVaultRoleAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, kmsMi.id, keyVaultCryptoUserRoleId, customerKeyVault.id)
  scope: customerKeyVault
  properties: {
    principalId: kmsMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: keyVaultCryptoUserRoleId
  }
}

resource serviceManagedIdentityReaderOnKmsMi &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, readerRoleId, kmsMi.id)
  scope: kmsMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: readerRoleId
  }
}

//
// C O N T R O L   P L A N E   O P E R A T O R   M A N A G E D   I D E N T I T Y
//

resource controlPlaneMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-cp-control-plane-${randomSuffix}&#39;
  location: resourceGroup().location
}

// Azure Red Hat OpenShift Hosted Control Planes Control Plane Operator
var hcpControlPlaneOperatorRoleId = subscriptionResourceId(
  &#39;Microsoft.Authorization/roleDefinitions&#39;,
  &#39;fc0c873f-45e9-4d0d-a7d1-585aab30c6ed&#39;
)

resource hcpControlPlaneOperatorVnetRoleAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, controlPlaneMi.id, hcpControlPlaneOperatorRoleId, customerVnet.id)
  scope: customerVnet
  properties: {
    principalId: controlPlaneMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: hcpControlPlaneOperatorRoleId
  }
}

resource hcpControlPlaneOperatorNsgRoleAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, controlPlaneMi.id, hcpControlPlaneOperatorRoleId, customerNsg.id)
  scope: customerNsg
  properties: {
    principalId: controlPlaneMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: hcpControlPlaneOperatorRoleId
  }
}

resource serviceManagedIdentityReaderOnControlPlaneMi &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, readerRoleId, controlPlaneMi.id)
  scope: controlPlaneMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: readerRoleId
  }
}

//
// C L O U D   C O N T R O L L E R   M A N A G E R   M A N A G E D   I D E N T I T Y
//

resource cloudControllerManagerMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-cp-cloud-controller-manager-${randomSuffix}&#39;
  location: resourceGroup().location
}

// Azure Red Hat OpenShift Cloud Controller Manager
var cloudControllerManagerRoleId = subscriptionResourceId(
  &#39;Microsoft.Authorization/roleDefinitions&#39;,
  &#39;a1f96423-95ce-4224-ab27-4e3dc72facd4&#39;
)

resource cloudControllerManagerRoleSubnetAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, cloudControllerManagerMi.id, cloudControllerManagerRoleId, subnet.id)
  scope: subnet
  properties: {
    principalId: cloudControllerManagerMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: cloudControllerManagerRoleId
  }
}

resource cloudControllerManagerRoleNsgAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, cloudControllerManagerMi.id, cloudControllerManagerRoleId, customerNsg.id)
  scope: customerNsg
  properties: {
    principalId: cloudControllerManagerMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: cloudControllerManagerRoleId
  }
}

resource serviceManagedIdentityReaderOnCloudControllerManagerMi &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, readerRoleId, cloudControllerManagerMi.id)
  scope: cloudControllerManagerMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: readerRoleId
  }
}

//
// I N G R E S S   M A N A G E D   I D E N T I T Y
//

resource ingressMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-cp-ingress-${randomSuffix}&#39;
  location: resourceGroup().location
}

// Azure Red Hat OpenShift Cluster Ingress Operator
var ingressOperatorRoleId = subscriptionResourceId(
  &#39;Microsoft.Authorization/roleDefinitions&#39;,
  &#39;0336e1d3-7a87-462b-b6db-342b63f7802c&#39;
)

resource ingressOperatorRoleSubnetAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, ingressMi.id, ingressOperatorRoleId, subnet.id)
  scope: subnet
  properties: {
    principalId: ingressMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: ingressOperatorRoleId
  }
}

resource serviceManagedIdentityReaderOnIngressMi &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, readerRoleId, ingressMi.id)
  scope: ingressMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: readerRoleId
  }
}

//
// D I S K   C S I   D R I V E R   M A N A G E D   I D E N T I T Y
//

resource diskCsiDriverMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-cp-disk-csi-driver-${randomSuffix}&#39;
  location: resourceGroup().location
}

resource serviceManagedIdentityReaderOnDiskCsiDriverMi &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, readerRoleId, diskCsiDriverMi.id)
  scope: diskCsiDriverMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: readerRoleId
  }
}

//
// F I L E   C S I   D R I V E R   M A N A G E D   I D E N T I T Y
//

resource fileCsiDriverMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-cp-file-csi-driver-${randomSuffix}&#39;
  location: resourceGroup().location
}

// Azure Red Hat OpenShift File Storage Operator
var fileStorageOperatorRoleId = subscriptionResourceId(
  &#39;Microsoft.Authorization/roleDefinitions&#39;,
  &#39;0d7aedc0-15fd-4a67-a412-efad370c947e&#39;
)

resource fileStorageOperatorRoleSubnetAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, fileCsiDriverMi.id, fileStorageOperatorRoleId, subnet.id)
  scope: subnet
  properties: {
    principalId: fileCsiDriverMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: fileStorageOperatorRoleId
  }
}

resource fileStorageOperatorRoleNsgAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, fileCsiDriverMi.id, fileStorageOperatorRoleId, customerNsg.id)
  scope: customerNsg
  properties: {
    principalId: fileCsiDriverMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: fileStorageOperatorRoleId
  }
}

resource serviceManagedIdentityReaderOnFileCsiDriverMi &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, readerRoleId, fileCsiDriverMi.id)
  scope: fileCsiDriverMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: readerRoleId
  }
}

//
// I M A G E   R E G I S T R Y   M A N A G E D   I D E N T I T Y
//

resource imageRegistryMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-cp-image-registry-${randomSuffix}&#39;
  location: resourceGroup().location
}

resource serviceManagedIdentityReaderOnImageRegistryMi &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, readerRoleId, imageRegistryMi.id)
  scope: imageRegistryMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: readerRoleId
  }
}

//
// C L O U D   N E T W O R K   C O N F I G   M A N A G E D   I D E N T I T Y
//

resource cloudNetworkConfigMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-cp-cloud-network-config-${randomSuffix}&#39;
  location: resourceGroup().location
}

// Azure Red Hat OpenShift Network Operator
var networkOperatorRoleId = subscriptionResourceId(
  &#39;Microsoft.Authorization/roleDefinitions&#39;,
  &#39;be7a6435-15ae-4171-8f30-4a343eff9e8f&#39;
)

resource networkOperatorRoleSubnetAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, cloudNetworkConfigMi.id, networkOperatorRoleId, subnet.id)
  scope: subnet
  properties: {
    principalId: cloudNetworkConfigMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: networkOperatorRoleId
  }
}

resource networkOperatorRoleVnetAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, cloudNetworkConfigMi.id, networkOperatorRoleId, customerVnet.id)
  scope: customerVnet
  properties: {
    principalId: cloudNetworkConfigMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: networkOperatorRoleId
  }
}

resource serviceManagedIdentityReaderOnCloudNetworkMi &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, readerRoleId, cloudNetworkConfigMi.id)
  scope: cloudNetworkConfigMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: readerRoleId
  }
}

//
// D A T A P L A N E   I D E N T I T I E S
//

// Azure Red Hat OpenShift Federated Credential
// give the ability to perform OIDC federation to the service managed identity
// over the corresponding dataplane identities
var federatedCredentialsRoleId = subscriptionResourceId(
  &#39;Microsoft.Authorization/roleDefinitions&#39;,
  &#39;ef318e2a-8334-4a05-9e4a-295a196c6a6e&#39;
)

resource dpDiskCsiDriverMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-dp-disk-csi-driver-${randomSuffix}&#39;
  location: resourceGroup().location
}

resource dpDiskCsiDriverMiFederatedCredentialsRoleAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, dpDiskCsiDriverMi.id, federatedCredentialsRoleId)
  scope: dpDiskCsiDriverMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: federatedCredentialsRoleId
  }
}

resource dpFileCsiDriverMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-dp-file-csi-driver-${randomSuffix}&#39;
  location: resourceGroup().location
}

resource dpFileCsiDriverMiFederatedCredentialsRoleAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, dpFileCsiDriverMi.id, federatedCredentialsRoleId)
  scope: dpFileCsiDriverMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: federatedCredentialsRoleId
  }
}

resource dpFileCsiDriverFileStorageOperatorRoleSubnetAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, dpFileCsiDriverMi.id, fileStorageOperatorRoleId, subnet.id)
  scope: subnet
  properties: {
    principalId: dpFileCsiDriverMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: fileStorageOperatorRoleId
  }
}

resource dpFileCsiDriverFileStorageOperatorRoleNsgAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, dpFileCsiDriverMi.id, fileStorageOperatorRoleId, customerNsg.id)
  scope: customerNsg
  properties: {
    principalId: dpFileCsiDriverMi.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: fileStorageOperatorRoleId
  }
}

resource dpImageRegistryMi &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-dp-image-registry-${randomSuffix}&#39;
  location: resourceGroup().location
}

resource dpImageRegistryMiFederatedCredentialsRoleAssignment &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, dpImageRegistryMi.id, federatedCredentialsRoleId)
  scope: dpImageRegistryMi
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: federatedCredentialsRoleId
  }
}

//
// S E R V I C E   M A N A G E D   I D E N T I T Y
//

resource serviceManagedIdentity &#39;Microsoft.ManagedIdentity/userAssignedIdentities@2023-01-31&#39; = {
  name: &#39;${clusterName}-service-managed-identity-${randomSuffix}&#39;
  location: resourceGroup().location
}

// Azure Red Hat OpenShift Hosted Control Planes Service Managed Identity
var hcpServiceManagedIdentityRoleId = subscriptionResourceId(
  &#39;Microsoft.Authorization/roleDefinitions&#39;,
  &#39;c0ff367d-66d8-445e-917c-583feb0ef0d4&#39;
)

// grant service managed identity role to the service managed identity over the user provided subnet
resource serviceManagedIdentityRoleAssignmentVnet &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, hcpServiceManagedIdentityRoleId, customerVnet.id)
  scope: customerVnet
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: hcpServiceManagedIdentityRoleId
  }
}

// grant service managed identity role to the service managed identity over the user provided subnet
resource serviceManagedIdentityRoleAssignmentSubnet &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, hcpServiceManagedIdentityRoleId, subnet.id)
  scope: subnet
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: hcpServiceManagedIdentityRoleId
  }
}

// grant service managed identity role to the service managed identity over the user provided NSG
resource serviceManagedIdentityRoleAssignmentNSG &#39;Microsoft.Authorization/roleAssignments@2022-04-01&#39; = {
  name: guid(resourceGroup().id, serviceManagedIdentity.id, hcpServiceManagedIdentityRoleId, customerNsg.id)
  scope: customerNsg
  properties: {
    principalId: serviceManagedIdentity.properties.principalId
    principalType: &#39;ServicePrincipal&#39;
    roleDefinitionId: hcpServiceManagedIdentityRoleId
  }
}

resource hcp &#39;Microsoft.RedHatOpenShift/hcpOpenShiftClusters@2024-06-10-preview&#39; = {
  name: clusterName
  location: resourceGroup().location
  properties: {
    version: {
      id: &#39;4.19&#39;
      channelGroup: &#39;stable&#39;
    }
    dns: {}
    network: {
      networkType: &#39;OVNKubernetes&#39;
      podCidr: &#39;10.128.0.0/14&#39;
      serviceCidr: &#39;172.30.0.0/16&#39;
      machineCidr: &#39;10.0.0.0/16&#39;
      hostPrefix: 23
    }
    console: {}
    etcd: {
      dataEncryption: {
        keyManagementMode: &#39;CustomerManaged&#39;
        customerManaged: {
          encryptionType: &#39;kms&#39;
          kms: {
            activeKey: {
              vaultName: customerKeyVaultName
              name: etcdEncryptionKeyName
              version: last(split(etcdEncryptionKey.properties.keyUriWithVersion, &#39;/&#39;))
            }
          }
        }
      }
    }
    api: {
      visibility: &#39;Public&#39;
    }
    clusterImageRegistry: {
      state: &#39;Enabled&#39;
    }
    platform: {
      managedResourceGroup: managedResourceGroupName
      subnetId: subnet.id
      outboundType: &#39;LoadBalancer&#39;
      networkSecurityGroupId: customerNsg.id
      operatorsAuthentication: {
        userAssignedIdentities: {
          controlPlaneOperators: {
            &#39;cluster-api-azure&#39;: clusterApiAzureMi.id
            &#39;control-plane&#39;: controlPlaneMi.id
            &#39;cloud-controller-manager&#39;: cloudControllerManagerMi.id
            #disable-next-line prefer-unquoted-property-names
            &#39;ingress&#39;: ingressMi.id
            &#39;disk-csi-driver&#39;: diskCsiDriverMi.id
            &#39;file-csi-driver&#39;: fileCsiDriverMi.id
            &#39;image-registry&#39;: imageRegistryMi.id
            &#39;cloud-network-config&#39;: cloudNetworkConfigMi.id
            &#39;kms&#39;: kmsMi.id
          }
          dataPlaneOperators: {
            &#39;disk-csi-driver&#39;: dpDiskCsiDriverMi.id
            &#39;file-csi-driver&#39;: dpFileCsiDriverMi.id
            &#39;image-registry&#39;: dpImageRegistryMi.id
          }
          serviceManagedIdentity: serviceManagedIdentity.id
        }
      }
    }
  }
  identity: {
    type: &#39;UserAssigned&#39;
    userAssignedIdentities: {
      &#39;${serviceManagedIdentity.id}&#39;: {}
      &#39;${clusterApiAzureMi.id}&#39;: {}
      &#39;${controlPlaneMi.id}&#39;: {}
      &#39;${cloudControllerManagerMi.id}&#39;: {}
      &#39;${ingressMi.id}&#39;: {}
      &#39;${diskCsiDriverMi.id}&#39;: {}
      &#39;${fileCsiDriverMi.id}&#39;: {}
      &#39;${imageRegistryMi.id}&#39;: {}
      &#39;${cloudNetworkConfigMi.id}&#39;: {}
      &#39;${kmsMi.id}&#39;: {}
    }
  }
  dependsOn: [
    hcpClusterApiProviderRoleSubnetAssignment
    keyVaultCryptoUserToKeyVaultRoleAssignment
    hcpControlPlaneOperatorVnetRoleAssignment
    hcpControlPlaneOperatorNsgRoleAssignment
    cloudControllerManagerRoleSubnetAssignment
    cloudControllerManagerRoleNsgAssignment
    ingressOperatorRoleSubnetAssignment
    fileStorageOperatorRoleSubnetAssignment
    fileStorageOperatorRoleNsgAssignment
    networkOperatorRoleSubnetAssignment
    networkOperatorRoleVnetAssignment
    dpDiskCsiDriverMiFederatedCredentialsRoleAssignment
    dpFileCsiDriverMiFederatedCredentialsRoleAssignment
    dpImageRegistryMiFederatedCredentialsRoleAssignment
    serviceManagedIdentityRoleAssignmentVnet
    serviceManagedIdentityRoleAssignmentSubnet
    serviceManagedIdentityRoleAssignmentNSG
    dpFileCsiDriverFileStorageOperatorRoleSubnetAssignment
    dpFileCsiDriverFileStorageOperatorRoleNsgAssignment
    serviceManagedIdentityReaderOnControlPlaneMi
    serviceManagedIdentityReaderOnCloudControllerManagerMi
    serviceManagedIdentityReaderOnIngressMi
    serviceManagedIdentityReaderOnDiskCsiDriverMi
    serviceManagedIdentityReaderOnFileCsiDriverMi
    serviceManagedIdentityReaderOnImageRegistryMi
    serviceManagedIdentityReaderOnCloudNetworkMi
    serviceManagedIdentityReaderOnClusterApiAzureMi
    serviceManagedIdentityReaderOnKmsMi
  ]
}

resource nodepool &#39;Microsoft.RedHatOpenShift/hcpOpenShiftClusters/nodePools@2024-06-10-preview&#39; = {
  parent: hcp
  name: nodePoolName
  location: resourceGroup().location
  properties: {
    version: {
      id: &#39;4.19.0&#39;
      channelGroup: &#39;stable&#39;
    }
    platform: {
      subnetId: hcp.properties.platform.subnetId
      vmSize: &#39;Standard_D8s_v3&#39;
      osDisk: {
        sizeGiB: 64
        diskStorageAccountType: &#39;StandardSSD_LRS&#39;
      }
    }
    replicas: 2
  }
}
</code></pre></div></td></tr></table></div>
</div>
<h2 id="create-the-cluster-using-bicep">Create the cluster using Bicep<a class="headerlink" href="#create-the-cluster-using-bicep" title="Permanent link">&para;</a></h2>
<p>This section describes how to use Bicep to create the cluster. </p>
<ol>
<li>
<p>Set the following variables in the shell environment that you plan to execute the az commands.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp"># </span>location<span class="w"> </span>of<span class="w"> </span>your<span class="w"> </span>cluster
<span class="go">LOCATION=&quot;&lt;location&gt;&quot;</span>

<span class="gp"># </span>name<span class="w"> </span>of<span class="w"> </span>your<span class="w"> </span>subscription
<span class="go">SUBSCRIPTION=&quot;&lt;subscription-name&gt;&quot;</span>

<span class="gp"># </span>name<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>resource<span class="w"> </span>group<span class="w"> </span>where<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>your<span class="w"> </span>cluster
<span class="go">CUSTOMER_RG_NAME=&quot;$USER-net-rg-03&quot;</span>

<span class="gp"># </span>name<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>nsg
<span class="go">CUSTOMER_NSG=&quot;&lt;nsg-name&gt;&quot;</span>

<span class="gp"># </span>name<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>vnet
<span class="go">CUSTOMER_VNET_NAME=&quot;&lt;vnet-name&gt;&quot;</span>

<span class="gp"># </span>name<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>subnet<span class="w"> </span>within<span class="w"> </span>the<span class="w"> </span>vnet
<span class="go">CUSTOMER_VNET_SUBNET1=&quot;&lt;subnet-name&gt;&quot;</span>

<span class="gp"># </span>name<span class="w"> </span>of<span class="w"> </span>your<span class="w"> </span>cluster
<span class="go">CLUSTER_NAME=&quot;&lt;cluster-name&gt;&quot;</span>

<span class="gp"># </span>name<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>managed<span class="w"> </span>resource<span class="w"> </span>group
<span class="go">MANAGED_RESOURCE_GROUP=&quot;$CLUSTER_NAME-rg-03&quot;</span>

<span class="gp"># </span>name<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>node<span class="w"> </span>pool
<span class="go">NP_NAME=&quot;&lt;node-pool-name&gt;&quot;</span>

<span class="gp"># </span>optional<span class="w"> </span>variables<span class="w"> </span><span class="k">for</span><span class="w"> </span>creating<span class="w"> </span>tags
<span class="go">SUBSCRIPTION_ID=$(az account show --query id --output tsv)</span>
<span class="go">POLICY_DEFINITION=&quot;&lt;policy-name&gt;&quot;</span>
<span class="go">POLICY_ASSIGNMENT=&quot;${POLICY_DEFINITION}-${CLUSTER_NAME}&quot;</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Create a resource group to hold the cluster resource, node pool resource, and the cluster virtual network and identities.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subscription<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SUBSCRIPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--location<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LOCATION</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
</li>
<li>
<p>(Optional) If desired, define tags that will be applied to each of the resources in your managed resource group.</p>
<p>Follow these steps to use Azure Policy to tag the resources in your managed resource group. When you create the Azure Red Hat OpenShift with hosted control planes cluster, these tags will be applied to the managed resource group, and to each of the resources within it:</p>
<ol>
<li>
<p>Create the following JSON files to define the tags:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/openshift/howto-tag-resources#create-rules-file">Rules file</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/openshift/howto-tag-resources#create-parameter-definitions">Parameter definitions</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/openshift/howto-tag-resources#create-parameter-definitions">Parameter values</a></li>
</ul>
</li>
<li>
<p>Create the policy definition.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>policy<span class="w"> </span>definition<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span><span class="nv">$POLICY_DEFINITION</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--mode<span class="w"> </span>All<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--rules<span class="w"> </span>rules.json<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--params<span class="w"> </span>param-defs.json
</code></pre></div>
</li>
<li>
<p>Create the policy assignment.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>policy<span class="w"> </span>assignment<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span><span class="nv">$POLICY_ASSIGNMENT</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--policy<span class="w"> </span><span class="nv">$POLICY_DEFINITION</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--scope<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--location<span class="w"> </span><span class="nv">$LOCATION</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--mi-system-assigned<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--role<span class="w"> </span><span class="s2">&quot;Tag Contributor&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--identity-scope<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--params<span class="w"> </span>param-values.json
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Apply the Bicep file.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>deployment<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
--name<span class="w"> </span><span class="s1">&#39;aro-hcp&#39;</span><span class="w"> </span><span class="se">\</span>
--subscription<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SUBSCRIPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
--resource-group<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
--template-file<span class="w"> </span>azuredeploy.bicep<span class="w"> </span><span class="se">\</span>
--parameters<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nv">customerNsgName</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CUSTOMER_NSG</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nv">customerVnetName</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CUSTOMER_VNET_NAME</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nv">customerVnetSubnetName</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CUSTOMER_VNET_SUBNET1</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nv">clusterName</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nv">managedResourceGroupName</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">MANAGED_RESOURCE_GROUP</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nv">nodePoolName</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NP_NAME</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
</li>
<li>
<p>(Optional) If desired, create a tag for the managed resource group.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>tag<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
--resource-id<span class="w"> </span>/subscriptions/<span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span>/resourcegroups/<span class="si">${</span><span class="nv">MANAGED_RESOURCE_GROUP</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
--tags<span class="w"> </span>&lt;tag-key&gt;<span class="o">=</span>&lt;tag-value&gt;
</code></pre></div>
</li>
</ol>
<h2 id="access-the-cluster">Access the cluster<a class="headerlink" href="#access-the-cluster" title="Permanent link">&para;</a></h2>
<p>After creating an Azure Red Hat OpenShift with hosted control planes cluster, you can request a temporary administrative credential to access your cluster.</p>
<p>Requesting an administrative credential generates a new cluster-admin <code>kubeconfig</code> file. The <code>kubeconfig</code> file contains information about the cluster that connects a client to the correct cluster and API server. You can use the newly generated <code>kubeconfig</code> file to allow access to the cluster.</p>
<p>Administrative credentials expire after 24 hours. You can request multiple administrative credentials for a cluster. You can also revoke all administrative credentials for the cluster.</p>
<ol>
<li>
<p>Request an administrative credential.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>rest<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--method<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--uri<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourceGroups/</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">/providers/Microsoft.RedHatOpenShift/hcpOpenShiftClusters/</span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2">/requestAdminCredential?api-version=2024-06-10-preview&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--verbose
</code></pre></div>
<p>The admin credential is generated as an <a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/async-operations">asynchronous Azure operation</a>.  </p>
</li>
<li>
<p>Monitor the status of the operation.</p>
<ol>
<li>
<p>In the response headers, find the URL listed in the <code>Azure-AsyncOperation</code> field.</p>
</li>
<li>
<p>Use the <code>Azure-AsyncOperation</code> URL to get the status.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>rest<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--method<span class="w"> </span>GET<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--uri<span class="w"> </span><span class="s2">&quot;&lt;url-from-Azure-AsyncOperation-field&gt;&quot;</span>
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Get the newly-generated <code>kubeconfig</code> content and save it as a <code>kubeconfig</code> file.</p>
<ol>
<li>
<p>In the response headers from the original operation, find the URL listed in the <code>Location</code> field.</p>
</li>
<li>
<p>Use the <code>Location</code> field URL to get the <code>kubeconfig</code> file.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>rest<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--method<span class="w"> </span>GET<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--uri<span class="w"> </span><span class="s2">&quot;&lt;url-from-Location-field&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w">  </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.kubeconfig&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>kubeconfig
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Verify that you have the correct credentials:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">KUBECONFIG</span><span class="o">=</span>kubeconfig
<span class="gp">$ </span>kubectl<span class="w"> </span>auth<span class="w"> </span>whoami<span class="w"> </span>--insecure-skip-tls-verify<span class="o">=</span><span class="nb">true</span>
<span class="go">ATTRIBUTE    VALUE</span>
<span class="go">Username     system:customer-break-glass:&lt;user-id&gt;</span>
<span class="go">Groups       [system:masters system:authenticated]</span>
<span class="go">Extra: authentication.kubernetes.io/credential-id   &lt;credential-id&gt;</span>
</code></pre></div>
</li>
<li>
<p>If desired, revoke all administrative credentials for the cluster:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>rest<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--method<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--uri<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourceGroups/</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">/providers/Microsoft.RedHatOpenShift/hcpOpenShiftClusters/</span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2">/revokeCredentials?api-version=2024-06-10-preview&quot;</span>
</code></pre></div>
</li>
</ol>
<h2 id="clean-up">Clean up<a class="headerlink" href="#clean-up" title="Permanent link">&para;</a></h2>
<p>When you are done using your Azure Red Hat OpenShift with hosted control planes cluster, you can delete it.</p>
<ol>
<li>
<p>Delete the cluster (the <code>hcpOpenShiftClusters</code> resource).</p>
<p>Deleting the <code>hcpOpenShiftClusters</code> resource deletes the cluster, its node pools, and the managed resource group.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>rest<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--method<span class="w"> </span>DELETE<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--uri<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourceGroups/</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">/providers/Microsoft.RedHatOpenShift/hcpOpenShiftClusters/</span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2">?api-version=2024-06-10-preview&quot;</span>
</code></pre></div>
</li>
<li>
<p>Verify that the cluster is deleted.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>rest<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--method<span class="w"> </span>GET<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--uri<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourceGroups/</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">/providers/Microsoft.RedHatOpenShift/hcpOpenShiftClusters/</span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2">?api-version=2024-06-10-preview&quot;</span>
</code></pre></div>
</li>
<li>
<p>Delete the resource group.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>group<span class="w"> </span>delete<span class="w"> </span>--name<span class="w"> </span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span>
</code></pre></div>
</li>
</ol>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 1, 2025 18:50:44 UTC">October 1, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "navigation.tabs"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>