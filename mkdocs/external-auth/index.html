
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../create-cluster/">
      
      
        <link rel="next" href="../add-pull-secrets/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Configure an external authentication provider - ARO HCP Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/override.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#create-an-external-authentication-provider" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ARO HCP Documentation" class="md-header__button md-logo" aria-label="ARO HCP Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ARO HCP Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configure an external authentication provider
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bhardesty/aro-hcp-doc-demo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../introduction/" class="md-tabs__link">
          
  
  
  User docs

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ARO HCP Documentation" class="md-nav__button md-logo" aria-label="ARO HCP Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ARO HCP Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bhardesty/aro-hcp-doc-demo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User docs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service-def/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service definition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Set up clusters
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Set up clusters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview of cluster configuration choices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../create-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create a cluster
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Manage clusters
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Manage clusters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Configure an external authentication provider
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Configure an external authentication provider
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prepare-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Prepare environment variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-microsoft-entra-id" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Microsoft Entra ID
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-optional-claims" class="md-nav__link">
    <span class="md-ellipsis">
      Configure optional claims
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-an-external-authentication-provider_1" class="md-nav__link">
    <span class="md-ellipsis">
      Create an external authentication provider
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-authentication-and-authorization-in-openshift" class="md-nav__link">
    <span class="md-ellipsis">
      Configure authentication and authorization in OpenShift
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validate-the-external-authentication-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Validate the external authentication configuration
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../add-pull-secrets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add pull secrets to access private registries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resize-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resize a cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade a cluster
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Monitor clusters
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Monitor clusters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../get-audit-logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get audit logs from Shoebox
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prepare-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Prepare environment variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-microsoft-entra-id" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Microsoft Entra ID
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-optional-claims" class="md-nav__link">
    <span class="md-ellipsis">
      Configure optional claims
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-an-external-authentication-provider_1" class="md-nav__link">
    <span class="md-ellipsis">
      Create an external authentication provider
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-authentication-and-authorization-in-openshift" class="md-nav__link">
    <span class="md-ellipsis">
      Configure authentication and authorization in OpenShift
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validate-the-external-authentication-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Validate the external authentication configuration
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="create-an-external-authentication-provider">Create an external authentication provider<a class="headerlink" href="#create-an-external-authentication-provider" title="Permanent link">&para;</a></h1>
<p>In OpenShift, an external authentication provider is any system outside the cluster that handles user authentication on its behalf. Instead of creating and managing local accounts within OpenShift, you can connect the cluster to Microsoft Entra ID.</p>
<p>This article describes how to configure Microsoft Entra ID as an external authentication provider to provide access to both the CLI and the OpenShift console.</p>
<h2 id="prepare-environment-variables">Prepare environment variables<a class="headerlink" href="#prepare-environment-variables" title="Permanent link">&para;</a></h2>
<p>Make sure that the following environment variables are defined:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>SUBSCRIPTION=&quot;&lt;subscription-name&gt;&quot;
SUBSCRIPTION_ID=$(az account show --query id --output tsv)
CUSTOMER_RG_NAME=&quot;&lt;resource-group-name&gt;&quot;
CLUSTER_NAME=&quot;&lt;cluster-name&gt;&quot;
EXTERNAL_AUTH_NAME=${CLUSTER_NAME}-auth
TENANT_ID=$(az account show --query tenantId --output tsv)
ISSUER_URL=&quot;https://login.microsoftonline.com/${TENANT_ID}/v2.0&quot;
</code></pre></div></td></tr></table></div>
<h2 id="configure-microsoft-entra-id">Configure Microsoft Entra ID<a class="headerlink" href="#configure-microsoft-entra-id" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Retrieve the OpenShift Authentication call back URL.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span><span class="nv">OAUTH_CALLBACK_URL</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>rest<span class="w"> </span>--method<span class="w"> </span>GET<span class="w"> </span>--uri<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourceGroups/</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">/providers/Microsoft.RedHatOpenShift/hcpOpenShiftClusters/</span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2">?api-version=2024-06-10-preview&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.properties.console.url&#39;</span><span class="k">)</span>/auth/callback
</code></pre></div>
</li>
<li>
<p>Register a new application in Microsoft Entra ID.</p>
<p>If you would like to access the API server via the <code>oc</code> or <code>kubectl</code> CLIs, you must add a second redirect URI.</p>
<p>The following example creates a Microsoft Entra ID application with two redirect URIs: the required OpenShift Authentication call back URL, and a second redirect for CLI access:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span><span class="nv">CLIENT_ID</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>ad<span class="w"> </span>app<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--display-name<span class="w"> </span><span class="si">${</span><span class="nv">EXTERNAL_AUTH_NAME</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--web-redirect-uris<span class="w"> </span><span class="si">${</span><span class="nv">OAUTH_CALLBACK_URL</span><span class="si">}</span><span class="w"> </span>http://localhost:8000<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span>appId<span class="w"> </span>--output<span class="w"> </span>tsv<span class="k">)</span>
</code></pre></div>
</li>
<li>
<p>Create a client secret for the application.</p>
<p>A console message is displayed notifying you that the command output contains credentials. The client secret is used later in this article. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you’re finished, you can clear the variable by entering the <code>clientSecret=""</code> command.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span><span class="nv">CLIENT_SECRET</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>ad<span class="w"> </span>app<span class="w"> </span>credential<span class="w"> </span>reset<span class="w"> </span>--id<span class="w"> </span><span class="si">${</span><span class="nv">CLIENT_ID</span><span class="si">}</span><span class="w"> </span>--query<span class="w"> </span>password<span class="w"> </span>--output<span class="w"> </span>tsv<span class="k">)</span>
</code></pre></div>
</li>
</ol>
<h2 id="configure-optional-claims">Configure optional claims<a class="headerlink" href="#configure-optional-claims" title="Permanent link">&para;</a></h2>
<p>To provide OpenShift with enough information to identify the user, configure Microsoft Entra ID to provide an email optional claim when a user logs in. For more information on optional claims, see <a href="https://learn.microsoft.com/en-us/entra/identity-platform/optional-claims?tabs=appui">Configure and manage optional claims in ID tokens, access tokens, and SAML tokens</a>.</p>
<ol>
<li>
<p>Create a <code>manifest.json</code> file to configure the optional claims.</p>
<p>The following example configures three optional claims: email, groups, and preferred username:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>cat<span class="w"> </span>&gt;<span class="w"> </span>manifest.json&lt;&lt;<span class="w"> </span>EOF
<span class="go">{</span>
<span class="go">&quot;idToken&quot;: [</span>
<span class="go">    {</span>
<span class="go">    &quot;name&quot;: &quot;email&quot;,</span>
<span class="go">    &quot;source&quot;: null,</span>
<span class="go">    &quot;essential&quot;: false,</span>
<span class="go">    &quot;additionalProperties&quot;: []</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">    &quot;name&quot;: &quot;groups&quot;,</span>
<span class="go">    &quot;source&quot;: null,</span>
<span class="go">    &quot;essential&quot;: false,</span>
<span class="go">    &quot;additionalProperties&quot;: []</span>
<span class="go">    }</span>
<span class="go">],</span>
<span class="go">&quot;accessToken&quot;: [</span>
<span class="go">    {</span>
<span class="go">    &quot;name&quot;: &quot;groups&quot;,</span>
<span class="go">    &quot;source&quot;: null,</span>
<span class="go">    &quot;essential&quot;: false,</span>
<span class="go">    &quot;additionalProperties&quot;: []</span>
<span class="go">    }</span>
<span class="go">],</span>
<span class="go">&quot;saml2Token&quot;: [</span>
<span class="go">    {</span>
<span class="go">    &quot;name&quot;: &quot;groups&quot;,</span>
<span class="go">    &quot;source&quot;: null,</span>
<span class="go">    &quot;essential&quot;: false,</span>
<span class="go">    &quot;additionalProperties&quot;: []</span>
<span class="go">    }</span>
<span class="go">]</span>
<span class="go">}</span>
<span class="go">EOF</span>
</code></pre></div>
</li>
<li>
<p>Update the Microsoft Entra ID application to use the optional claims that you defined in the manifest.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>$ az ad app update \
  --id ${CLIENT_ID} \
  --optional-claims @manifest.json
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Assign the Microsoft Graph <a href="https://learn.microsoft.com/en-us/graph/permissions-reference#email">email</a> permission to your Microsoft Entra ID application. </p>
<p>This permission enables the ability to read a user’s email address from Microsoft Entra ID.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>ad<span class="w"> </span>app<span class="w"> </span>permission<span class="w"> </span>add<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--api<span class="w"> </span><span class="m">00000003</span>-0000-0000-c000-000000000000<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--api-permissions<span class="w"> </span>64a6cdd6-aab1-4aaf-94b8-3cc8405e90d0<span class="o">=</span>Scope<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--id<span class="w"> </span><span class="si">${</span><span class="nv">CLIENT_ID</span><span class="si">}</span>
</code></pre></div>
<p>Ignore the message to grant the consent unless you’re authenticated as a Global Administrator for this Microsoft Entra ID. Standard domain users are asked to grant consent when they first sign in to the cluster with their Microsoft Entra credentials.</p>
</li>
</ol>
<h2 id="create-an-external-authentication-provider_1">Create an external authentication provider<a class="headerlink" href="#create-an-external-authentication-provider_1" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Retrieve the API URL.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span><span class="nv">API_URL</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>rest<span class="w"> </span>--method<span class="w"> </span>GET<span class="w"> </span>--uri<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourceGroups/</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">/providers/Microsoft.RedHatOpenShift/hcpOpenShiftClusters/</span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2">?api-version=2024-06-10-preview&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.properties.api.url&#39;</span><span class="k">)</span>
</code></pre></div>
</li>
<li>
<p>Configure the external authentication provider for Azure Red Hat OpenShift with hosted control planes.</p>
<p>To configure an external authentication provider, you must define an <code>externalAuths</code> resource. The following example shows an <code>externalAuths</code> resource in a Bicep file.</p>
<div class="admonition example">
<p class="admonition-title">Example external authentication provider configuration (<code>externalauth.bicep</code>)</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code>@description(&#39;The name of the external auth provider configuration&#39;)    
param externalAuthName string

@description(&#39;The issuer url&#39;)
param issuerURL string

@description(&#39;The client ID&#39;)
param clientID string

@description(&#39;Name of the hypershift cluster&#39;)
param clusterName string

resource hcp &#39;Microsoft.RedHatOpenShift/hcpOpenShiftClusters@2024-06-10-preview&#39; existing = {
    name: clusterName
}

resource externalauth &#39;Microsoft.RedHatOpenShift/hcpOpenShiftClusters/externalAuths@2024-06-10-preview&#39; = {
    parent: hcp
    name: externalAuthName
    properties: {
        claim: {
            mappings: {
                username: {
                    claim: &#39;email&#39;
                }
                groups: {
                    claim: &#39;groups&#39;
                }
            }
        }
        clients: [
            {
                clientId: clientID
                component: {
                    name: &#39;console&#39;
                    authClientNamespace: &#39;openshift-console&#39;
                }
                type: &#39;confidential&#39;
            }
            {
                clientId: clientID
                component: {
                    name: &#39;cli&#39;
                    authClientNamespace: &#39;openshift-console&#39;
                }
                type: &#39;public&#39;
            }
        ]
        issuer: {
            url: issuerURL
            audiences: [
                clientID
            ]
        }
    }
}
</code></pre></div></td></tr></table></div>
<dl>
<dt><code>claim.mappings.username</code></dt>
<dd>
<p>The name of the claim that is used to construct the user names for cluster identity. You can configure the following properties for the claim user name:</p>
<dl>
<dt><code>claim.mappings.username.claim</code></dt>
<dd>The claim name.</dd>
<dt><code>claim.mappings.username.prefix</code></dt>
<dd>Optional. The prefix for the claim external profile. If you set the prefix, <code>prefixPolicy</code> will be set to <code>Prefix</code> by default.</dd>
<dt><code>claim.mappings.username.prefixPolicy</code></dt>
<dd>Optional. Defines how a prefix should be applied to the value of the JWT claim specified in the claim property. You can set this to <code>Prefix</code> (the claim name will be prefixed with the value of the prefix property), <code>NoPrefix</code> (no prefix will be added to the claim name), or leave the property unset (the platform will define the claim name prefix).</dd>
</dl>
</dd>
<dt><code>claim.mappings.groups</code></dt>
<dd>
<p>Optional. The method with which to transform the ID token into a cluster identity. You can configure the following properties for the claim mapping groups:</p>
<ul>
<li><code>claim.mappings.groups.claim</code> - The claim name.</li>
<li><code>claim.mappings.groups.prefix</code> - Optional. The prefix for the claim external profile.</li>
</ul>
</dd>
<dt><code>claim.validationRules</code></dt>
<dd>Optional. The rules that help validate token claims which authenticate your users. To add a validation rule, configure the <code>claim.validationRules.requiredClaim</code> property. </dd>
<dt><code>clients</code></dt>
<dd>
<p>Optional. Configures how on-cluster, platform clients should request tokens from the identity provider. Must not exceed 20 entries and entries must have unique namespace/name pairs.</p>
<p>For each client, you can configure the following properties:</p>
<ul>
<li><code>clients.component.name</code>  - The name of the platform component being configured to use the identity provider as an authentication mode.</li>
<li><code>clients.component.authClientNamespace</code> - The namespace in which the platform component being configured to use the identity provider as an authentication mode is running.</li>
<li><code>clients.clientId</code> - The client identifier, from the identity provider, that the platform component uses for authentication requests made to the identity provider. The identity provider must accept this identifier for platform components to be able to use the identity provider as an authentication mode. The client ID must be available in the issuer audiences.</li>
<li><code>clients.extraScopes</code> - Optional. The extra scopes that should be requested by the platform component when making authentication requests to the identity provider. This is useful if you have configured claim mappings that require specific scopes to be requested beyond the standard OIDC scopes. When omitted, no additional scopes are requested.</li>
<li><code>clients.type</code> - The client type (either confidential or public). Confidential clients must provide a client secret for authentication requests. Public clients don’t have to provide a client secret. The only supported confidential client is <code>console/openshift-console</code>.</li>
</ul>
</dd>
<dt><code>issuer.url</code></dt>
<dd>
<p>Required. The URL of the token issuer.</p>
<p>The Kubernetes API server determines how authentication tokens should be handled by matching the <code>iss</code> claim in the JWT to the issuer URL of configured identity providers. This field must use the <code>https://</code> scheme.</p>
</dd>
<dt><code>issuer.audiences</code></dt>
<dd>Required. The audience IDs for which this authentication provider issues tokens. You must configure at least one audience, and can configure up to ten total audiences. At least one of the entries must match the <code>aud</code> claim in the JWT token.</dd>
<dt><code>issuer.ca</code></dt>
<dd>Optional. The PEM encoded certificate to use when making requests. If you don’t specify a CA, the system trust is used.</dd>
</dl>
</div>
</li>
<li>
<p>Apply the Bicep file.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>deployment<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span><span class="s1">&#39;aro-hcp-auth&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--subscription<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SUBSCRIPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--resource-group<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--template-file<span class="w"> </span>externalauth.bicep<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--parameters<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">externalAuthName</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">EXTERNAL_AUTH_NAME</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">issuerURL</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">ISSUER_URL</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">clientID</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CLIENT_ID</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">clusterName</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
</li>
<li>
<p>Verify the external authentication provider configuration.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>rest<span class="w"> </span>--method<span class="w"> </span>GET<span class="w"> </span>--uri<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourceGroups/</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">/providers/Microsoft.RedHatOpenShift/hcpOpenShiftClusters/</span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2">/externalAuths/</span><span class="si">${</span><span class="nv">EXTERNAL_AUTH_NAME</span><span class="si">}</span><span class="s2">?api-version=2024-06-10-preview&quot;</span>
</code></pre></div>
</li>
</ol>
<h2 id="configure-authentication-and-authorization-in-openshift">Configure authentication and authorization in OpenShift<a class="headerlink" href="#configure-authentication-and-authorization-in-openshift" title="Permanent link">&para;</a></h2>
<p>After creating the external authentication provider, you must log into your Azure Red Hat OpenShift with hosted control planes cluster to configure access for your confidential client (the OpenShift console), and to set up role-based access control (RBAC).</p>
<ol>
<li>
<p>If you don’t have a temporary administrative credential for your Azure Red Hat OpenShift with hosted control planes cluster, generate one.</p>
<p>For more information, see <a href="../create-cluster/#access-the-cluster">Access the cluster</a>.</p>
<p>Your cluster doesn’t use the built-in OpenShift OAuth server to act as a separate identity provider. This means there isn’t a standalone cluster-admin account with which you can access the cluster. Instead, you must request a temporary administrative credential, which provides a <code>kubeconfig</code> with cluster-admin privileges.</p>
</li>
<li>
<p>Using the <code>kubeconfig</code> file from the temporary admin credential, create a secret in the <code>openshift-config</code> namespace to store the client secret for your Microsoft Entra application.</p>
<p>This example creates a secret that enables the OpenShift console to use the external authentication provider for authentication:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>oc<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span><span class="si">${</span><span class="nv">EXTERNAL_AUTH_NAME</span><span class="si">}</span>-console-openshift-console<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>openshift-config<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-literal<span class="o">=</span><span class="nv">clientSecret</span><span class="o">=</span><span class="si">${</span><span class="nv">CLIENT_SECRET</span><span class="si">}</span>
</code></pre></div>
</li>
<li>
<p>(Optional) If necessary, assign users and groups to your Azure Red Hat OpenShift with hosted control planes cluster.</p>
<p>Applications registered in a Microsoft Entra tenant are, by default, available to all users of the tenant who authenticate successfully. Microsoft Entra ID allows tenant administrators and developers to restrict an app to a specific set of users or security groups in the tenant.</p>
<p>Follow the instructions on the Microsoft Entra documentation to <a href="https://learn.microsoft.com/en-us/entra/identity-platform/howto-restrict-your-app-to-a-set-of-users">Restrict a Microsoft Entra app to a set of users</a>.</p>
</li>
<li>
<p>Configure RBAC for your cluster.</p>
<p>By default, OpenShift does not grant permissions to take any action inside of your cluster when a user first logs in. Azure Red Hat OpenShift with hosted control planes includes a significant number of preconfigured roles, including the cluster-admin role that grants full access and control over the cluster. The cluster does not automatically create <code>RoleBinding</code> and <code>ClusterRoleBinding</code> objects for the groups that are included in your access token; you are responsible for creating those bindings yourself.</p>
<p>This example shows how to create a <code>ClusterRoleBinding</code> object that grants members of a Microsoft Azure group the cluster-admin role.</p>
<ol>
<li>
<p>Retrieve the group ID of the group to which you want to grant access.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span><span class="nv">GROUP_ID</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>ad<span class="w"> </span>group<span class="w"> </span>show<span class="w"> </span>--group<span class="w"> </span><span class="s2">&quot;&lt;group-name&gt;&quot;</span><span class="w"> </span>--query<span class="w"> </span>id<span class="w"> </span>-o<span class="w"> </span>tsv<span class="k">)</span>
</code></pre></div>
</li>
<li>
<p>Create the <code>ClusterRoleBinding</code> object to grant the group access to the cluster-admin role.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">$ </span>oc<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-<span class="w"> </span>&lt;&lt;EOF
<span class="go">apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="go">kind: ClusterRoleBinding</span>
<span class="go">metadata:</span>
<span class="go">  name: aro-admins</span>
<span class="go">roleRef:</span>
<span class="go">  apiGroup: rbac.authorization.k8s.io</span>
<span class="go">  kind: ClusterRole</span>
<span class="go">  name: cluster-admin</span>
<span class="go">subjects:</span>
<span class="go">- apiGroup: rbac.authorization.k8s.io</span>
<span class="go">  kind: Group</span>
<span class="go">  name: &lt;group-id&gt;</span>
<span class="go">EOF</span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
</li>
</ol>
<h2 id="validate-the-external-authentication-configuration">Validate the external authentication configuration<a class="headerlink" href="#validate-the-external-authentication-configuration" title="Permanent link">&para;</a></h2>
<p>After setting up external authentication for your cluster, you can validate the configuration for the OpenShift CLI and web console.</p>
<h3 id="validate-access-to-the-openshift-web-console">Validate access to the OpenShift web console<a class="headerlink" href="#validate-access-to-the-openshift-web-console" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Retrieve the URL for the OpenShift web console.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>az<span class="w"> </span>rest<span class="w"> </span>--method<span class="w"> </span>GET<span class="w"> </span>--uri<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourceGroups/</span><span class="si">${</span><span class="nv">CUSTOMER_RG_NAME</span><span class="si">}</span><span class="s2">/providers/Microsoft.RedHatOpenShift/hcpOpenShiftClusters/</span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2">?api-version=2024-06-10-preview&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.properties.console.url&#39;</span>
</code></pre></div>
</li>
<li>
<p>Open the URL in your web browser and sign in.</p>
</li>
</ol>
<h3 id="validate-access-to-the-openshift-cli">Validate access to the OpenShift CLI<a class="headerlink" href="#validate-access-to-the-openshift-cli" title="Permanent link">&para;</a></h3>
<p>You can use <code>kubelogin</code>, a client-go credential plugin, to authenticate to your OpenShift cluster using the external authentication provider (Entra ID).</p>
<p><strong>Prerequisites</strong></p>
<ul>
<li>Krew (the <code>kubectl</code> plugin manager). See the <a href="https://krew.sigs.k8s.io/docs/user-guide/setup/install/">installation instructions</a>.  </li>
<li><code>kubelogin</code>. See the <a href="https://github.com/int128/kubelogin?tab=readme-ov-file#setup">installation instructions</a>.</li>
</ul>
<p>To validate access to the CLI:</p>
<ol>
<li>
<p>Set the OIDC configuration in the <code>kubeconfig</code> that you used to access the cluster.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>oc<span class="w"> </span>config<span class="w"> </span>set-credentials<span class="w"> </span>oidc<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--exec-api-version<span class="o">=</span><span class="s2">&quot;client.authentication.k8s.io/v1beta1&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--exec-command<span class="o">=</span><span class="s2">&quot;kubectl&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--exec-arg<span class="o">=</span><span class="s2">&quot;oidc-login&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--exec-arg<span class="o">=</span><span class="s2">&quot;get-token&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--exec-arg<span class="o">=</span><span class="s2">&quot;--oidc-issuer-url=</span><span class="nv">$ISSUER_URL</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--exec-arg<span class="o">=</span><span class="s2">&quot;--oidc-client-id=</span><span class="nv">$CLIENT_ID</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--exec-arg<span class="o">=</span><span class="s2">&quot;--oidc-client-secret=</span><span class="nv">$CLIENT_SECRET</span><span class="s2">&quot;</span>
</code></pre></div>
</li>
<li>
<p>Create a new context for the OIDC configuration.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>oc<span class="w"> </span>config<span class="w"> </span>set-context<span class="w"> </span>oidc<span class="w"> </span>--cluster<span class="o">=</span>cluster<span class="w"> </span>--namespace<span class="o">=</span>default<span class="w"> </span>--user<span class="o">=</span>oidc
</code></pre></div>
</li>
<li>
<p>Switch to the new context.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>oc<span class="w"> </span>config<span class="w"> </span>use-context<span class="w"> </span>oidc
</code></pre></div>
</li>
<li>
<p>Enter a command and then log in to verify access to the cluster.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>oc<span class="w"> </span>get<span class="w"> </span>nodes<span class="w"> </span>--insecure-skip-tls-verify
</code></pre></div>
</li>
<li>
<p>Verify your credentials.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>oc<span class="w"> </span>auth<span class="w"> </span>whoami<span class="w"> </span>--insecure-skip-tls-verify
<span class="go">ATTRIBUTE    VALUE</span>
<span class="go">Username     user@email.com</span>
<span class="go">Groups       [&lt;group-id&gt; system:authenticated]</span>
</code></pre></div>
</li>
</ol>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 1, 2025 18:41:53 UTC">October 1, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "navigation.tabs"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>