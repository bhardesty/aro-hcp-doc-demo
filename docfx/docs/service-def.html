<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Microsoft Azure Red Hat OpenShift with hosted control planes service definition | ARO HCP Docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Microsoft Azure Red Hat OpenShift with hosted control planes service definition | ARO HCP Docs ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/bhardesty/aro-hcp-doc-demo/blob/main/docfx_project/docs/service-def.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="ARO HCP Docs">
            ARO HCP Docs
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="microsoft-azure-red-hat-openshift-with-hosted-control-planes-service-definition">Microsoft Azure Red Hat OpenShift with hosted control planes service definition</h1>

<p>This documentation outlines the service definition for the Microsoft Azure Red Hat OpenShift with hosted control planes managed service.</p>
<h2 id="account-management">Account management</h2>
<p>This section provides information about the service definition for Azure Red Hat OpenShift with hosted control planes account management.</p>
<h3 id="billing-and-pricing">Billing and pricing</h3>
<p>Azure Red Hat OpenShift with hosted control planes is billed directly to your Azure account. Azure Red Hat OpenShift with hosted control planes pricing is consumption based, with annual commitments or three-year commitments for greater discounting. The total cost of Azure Red Hat OpenShift with hosted control planes consists of two components:</p>
<ul>
<li>Azure Red Hat OpenShift with hosted control planes service fees</li>
<li>Azure infrastructure fees</li>
</ul>
<p>Visit the <a href="https://azure.microsoft.com/en-us/pricing/details/openshift/">Microsoft Azure Red Hat Openshift pricing page</a> for more details.</p>
<h3 id="cluster-self-service">Cluster self-service</h3>
<p>Customers can self-service their clusters, including, but not limited to:</p>
<ul>
<li>Create a cluster</li>
<li>Delete a cluster</li>
<li>Add or remove an identity provider</li>
<li>Add or remove a user from an elevated group</li>
<li>Configure cluster privacy</li>
<li>Add or remove node pools and configure autoscaling</li>
</ul>
<p>You can perform these self-service tasks using the Microsoft Azure Red Hat Openshift APIs, Azure CLI, or Azure Portal.</p>
<p><strong>Additional resources</strong></p>
<ul>
<li><a href="#red-hat-operator-support">Red Hat Operator support</a></li>
</ul>
<h3 id="azure-compute-types">Azure compute types</h3>
<p>All Azure Red Hat OpenShift with hosted control planes clusters require a minimum of 2 worker nodes. Shutting down the underlying infrastructure through the cloud provider console is unsupported and can lead to data loss.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Approximately one vCPU core and 1 GiB of memory are reserved on each worker node and removed from allocatable resources. This reservation of resources is necessary to run processes required by the underlying platform. These processes include system daemons such as udev, kubelet, and container runtime among others. The reserved resources also account for kernel reservations. OpenShift Container Platform core systems such as audit log aggregation, metrics collection, DNS, image registry, SDN, and others might consume additional allocatable resources to maintain the stability and maintainability of the cluster. The additional resources consumed might vary based on usage. For additional information, see the <a href="https://kubernetes.io/docs/tasks/administer-cluster/reserve-compute-resources/#system-reserved">Kubernetes documentation</a>.</p>
</div>
<p><strong>Additional resources</strong></p>
<ul>
<li>For a detailed listing of supported compute types, see <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/sizes/overview?tabs=breakdownseries%2Cgeneralsizelist%2Ccomputesizelist%2Cmemorysizelist%2Cstoragesizelist%2Cgpusizelist%2Cfpgasizelist%2Chpcsizelist">Sizes for virtual machines in Azure</a>.</li>
</ul>
<h3 id="regions-and-availability-zones">Regions and availability zones</h3>
<p>The following Azure regions are currently available for Azure Red Hat OpenShift with hosted control planes:</p>
<ul>
<li>UK South</li>
<li>Canada Central</li>
<li>Australia East</li>
<li>Switzerland North</li>
<li>Brazil South</li>
<li>Central India</li>
</ul>
<div class="WARNING">
<h5>Warning</h5>
<p>The region cannot be changed after a cluster has been deployed.</p>
</div>
<h3 id="service-level-agreement-sla">Service Level Agreement (SLA)</h3>
<p>Any SLAs for the service itself are defined in Appendix 4 of the <a href="https://www.redhat.com/en/about/appendices">Red Hat Enterprise Agreement Appendix 4 (Online Subscription Services)</a>.</p>
<h3 id="limited-support-status">Limited support status</h3>
<p>When a cluster transitions to a <em>Limited Support</em> status, Red Hat no longer proactively monitors the cluster, the SLA is no longer applicable, and credits requested against the SLA are denied. It does not mean that you no longer have product support. In some cases, the cluster can return to a fully-supported status if you remediate the violating factors. However, in other cases, you might have to delete and recreate the cluster.</p>
<p>A cluster might move to a Limited Support status for many reasons, including the following scenarios:</p>
<p><strong>If you remove or replace any native Azure Red Hat OpenShift with hosted control planes components or any other component that is installed and managed by Red Hat</strong><br>
If cluster administrator permissions were used, Red Hat is not responsible for any of your or your authorized users' actions, including those that affect infrastructure services, service availability, or data loss. If Red Hat detects any such actions, the cluster might transition to a Limited Support status. Red Hat notifies you of the status change and you should either revert the action or create a support case to explore remediation steps that might require you to delete and recreate the cluster.</p>
<p>If you have questions about a specific action that might cause a cluster to move to a Limited Support status or need further assistance, open a support ticket.</p>
<h3 id="support">Support</h3>
<p>Azure Red Hat OpenShift with hosted control planes includes Red Hat Premium Support, which can be accessed by using the <a href="https://access.redhat.com/support?extIdCarryOver=true&amp;sc_cid=701f2000001Css5AAC">Red Hat Customer Portal</a>.</p>
<p>See the Red Hat <a href="https://access.redhat.com/support/offerings/production/sla">Production Support Terms of Service</a> for support response times.</p>
<p>Azure support is subject to a customer's existing support contract with Azure.</p>
<h2 id="monitoring">Monitoring</h2>
<p>This section provides information about the service definition for Azure Red Hat OpenShift with hosted control planes monitoring.</p>
<h3 id="cluster-metrics">Cluster metrics</h3>
<p>Azure Red Hat OpenShift with hosted control planes clusters come with an integrated Prometheus stack for cluster monitoring including CPU, memory, and network-based metrics. This is accessible through the web console. These metrics also allow for horizontal pod autoscaling based on CPU or memory metrics provided by an Azure Red Hat OpenShift with hosted control planes user.</p>
<h3 id="cluster-notifications">Cluster notifications</h3>
<p>Cluster notifications are messages about the status, health, or performance of your cluster.</p>
<p>Cluster notifications are the primary way that Red Hat Site Reliability Engineering (SRE) communicates with you about the health of your managed cluster. SRE may also use cluster notifications to prompt you to perform an action in order to resolve or prevent an issue with your cluster.</p>
<p>Cluster owners and administrators must regularly review and action cluster notifications to ensure clusters remain healthy and supported.</p>
<p>You can view cluster notifications in the Red Hat Hybrid Cloud Console, in the <strong>Cluster history</strong> tab for your cluster. By default, only the cluster owner receives cluster notifications as emails. If other users need to receive cluster notification emails, add each user as a notification contact for your cluster.</p>
<h2 id="networking">Networking</h2>
<p>This section provides information about the service definition for Azure Red Hat OpenShift with hosted control planes networking.</p>
<h3 id="custom-domains-for-applications">Custom domains for applications</h3>
<div class="WARNING">
<h5>Warning</h5>
<p>Starting with Azure Red Hat OpenShift with hosted control planes 4.14, the Custom Domain Operator is deprecated. To manage Ingress in Azure Red Hat OpenShift with hosted control planes 4.14 or later, use the Ingress Operator. The functionality is unchanged for Azure Red Hat OpenShift with hosted control planes 4.13 and earlier versions.</p>
</div>
<p>To use a custom hostname for a route, you must update your DNS provider by creating a canonical name (CNAME) record. Your CNAME record should map the OpenShift canonical router hostname to your custom domain. The OpenShift canonical router hostname is shown on the <em>Route Details</em> page after a route is created. Alternatively, a wildcard CNAME record can be created once to route all subdomains for a given hostname to the cluster's router.</p>
<h3 id="domain-validated-certificates">Domain validated certificates</h3>
<p>Azure Red Hat OpenShift with hosted control planes includes TLS security certificates needed for both internal and external services on the cluster. For external routes, there are two separate TLS wildcard certificates that are provided and installed on each cluster: one is for the web console and route default hostnames, and the other is for the API endpoint. OneCert is the certificate authority used for certificates. Routes within the cluster, such as the internal <a href="https://kubernetes.io/docs/tasks/access-application-cluster/access-cluster/#accessing-the-api-from-a-pod">API endpoint</a>, use TLS certificates signed by the cluster's built-in certificate authority and require the CA bundle available in every pod for trusting the TLS certificate.</p>
<h3 id="custom-certificate-authorities-for-builds">Custom certificate authorities for builds</h3>
<p>Azure Red Hat OpenShift with hosted control planes supports the use of custom certificate authorities to be trusted by builds when pulling images from an image registry.</p>
<h3 id="load-balancers">Load balancers</h3>
<p>Azure Red Hat OpenShift with hosted control planes only deploys load balancers from the default ingress controller. All other load balancers can be optionally deployed by a customer for secondary ingress controllers or Service load balancers.</p>
<h3 id="cluster-ingress">Cluster ingress</h3>
<p>Project administrators can add route annotations for many different purposes, including ingress control through IP allow-listing.</p>
<p>Ingress policies can also be changed by using <code>NetworkPolicy</code> objects, which leverage the <code>ovs-networkpolicy</code> plugin. This allows for full control over the ingress network policy down to the pod level, including between pods on the same cluster and even in the same namespace.</p>
<p>All cluster ingress traffic will go through the defined load balancers. Direct access to all nodes is blocked by cloud configuration.</p>
<h3 id="cluster-egress">Cluster egress</h3>
<p>Pod egress traffic control through <code>EgressNetworkPolicy</code> objects can be used to prevent or limit outbound traffic in Azure Red Hat OpenShift with hosted control planes.</p>
<h3 id="cloud-network-configuration">Cloud network configuration</h3>
<p>Azure Red Hat OpenShift with hosted control planes allows for the configuration of a private network connection through Azure services, such as:</p>
<ul>
<li>Vnet</li>
<li>Vnet peering</li>
<li>Transit Gateway</li>
<li>Direct Connect</li>
</ul>
<div class="IMPORTANT">
<h5>Important</h5>
<p>Red Hat site reliability engineers (SREs) do not monitor private network connections. Monitoring these connections is the responsibility of the customer.</p>
</div>
<h3 id="dns-forwarding">DNS forwarding</h3>
<p>Azure Red Hat OpenShift with hosted control planes clusters that have a private cloud network configuration, a customer can specify internal DNS servers available on that private connection, that should be queried for explicitly provided domains.</p>
<h3 id="network-verification">Network verification</h3>
<p>Network verification checks run automatically when you deploy a Azure Red Hat OpenShift with hosted control planes cluster into an existing Virtual Private Cloud (VPC) or create an additional machine pool with a subnet that is new to your cluster. The checks validate your network configuration and highlight errors, enabling you to resolve configuration issues prior to deployment.</p>
<p>You can also run the network verification checks manually to validate the configuration for an existing cluster.</p>
<h2 id="storage">Storage</h2>
<p>This section provides information about the service definition for Azure Red Hat OpenShift with hosted control planes storage.</p>
<h3 id="encrypted-at-rest-os-and-node-storage">Encrypted-at-rest OS and node storage</h3>
<p>Worker nodes use encrypted-at-rest Amazon Elastic Block Store (Amazon EBS) storage.</p>
<h3 id="encrypted-at-rest-pv">Encrypted-at-rest PV</h3>
<p>EBS volumes that are used for PVs are encrypted-at-rest by default.</p>
<h3 id="block-storage-rwo">Block storage (RWO)</h3>
<p>Persistent volumes (PVs) are backed by Azure Disk which is Read-Write-Once.</p>
<p>PVs can be attached only to a single node at a time and are specific to the availability zone in which they were provisioned. However, PVs can be attached to any node in the availability zone.</p>
<p>Each cloud provider has its own limits for how many PVs can be attached to a single node. <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/disks-types">See the specific instance types for documented maximums</a></p>
<h3 id="shared-storage-rwx">Shared Storage (RWX)</h3>
<p>The Azure Files CSI Driver can be used to provide RWX support for Azure Red Hat OpenShift with hosted control planes. A Red Hat Operator is provided and installed to simplify usage.</p>
<h2 id="platform">Platform</h2>
<p>This section provides information about the service definition for the Azure Red Hat OpenShift with hosted control planes platform.</p>
<h3 id="autoscaling">Autoscaling</h3>
<p>Node autoscaling is available on Azure Red Hat OpenShift with hosted control planes. You can configure the autoscaler option to automatically scale the number of machines in a cluster.</p>
<h3 id="daemonsets">Daemonsets</h3>
<p>Customers can create and run daemonsets on Azure Red Hat OpenShift with hosted control planes. To restrict daemonsets to only running on worker nodes, use the following <code>nodeSelector</code>:</p>
<pre><code class="lang-yaml">spec:
  nodeSelector:
    role: worker
</code></pre>
<h2 id="node-labels">Node labels</h2>
<p>Custom node labels are created by Red Hat during node creation and cannot be changed on Azure Red Hat OpenShift with hosted control planes clusters at this time. However, custom labels are supported when creating new machine pools.</p>
<h2 id="node-lifecycle">Node lifecycle</h2>
<p>Worker nodes are not guaranteed longevity, and may be replaced at any time as part of the normal operation and management of OpenShift.</p>
<p>A worker node might be replaced in the following circumstances:</p>
<ul>
<li>Machine health checks are deployed and configured to ensure that a worker node with a <code>NotReady</code> status is replaced to ensure smooth operation of the cluster.</li>
<li>An Azure instance may be terminated when Azure detects irreparable failure of the underlying hardware that hosts the instance.</li>
<li>During upgrades, a new, upgraded node is first created and joined to the cluster. Once this new node has been successfully integrated into the cluster via the previously described automated health checks, an older node is then removed from the cluster.</li>
</ul>
<p>For all containerized workloads running on a Kubernetes based system, it is best practice to configure applications to be resilient of node replacements.</p>
<h3 id="cluster-backup-policy">Cluster backup policy</h3>
<p>Red Hat recommends object-level backup solutions for Azure Red Hat OpenShift with hosted control planes clusters. OpenShift API for Data Protection (OADP) is included in OpenShift but not enabled by default. Customers can configure OADP on their clusters to achieve object-level backup and restore capabilities.</p>
<p>Red Hat does not back up customer applications or application data. Customers are solely responsible for applications and their data, and must put their own backup and restore capabilities in place.</p>
<div class="WARNING">
<h5>Warning</h5>
<p>Customers are solely responsible for backing up and restoring their applications and application data. For more information about customer responsibilities, see &quot;Shared responsibility matrix&quot;.</p>
</div>
<h3 id="openshift-version">OpenShift version</h3>
<p>Azure Red Hat OpenShift with hosted control planes is run as a service and is kept up to date with the latest OpenShift Container Platform version. Upgrade scheduling to the latest version is available.</p>
<h3 id="windows-containers">Windows Containers</h3>
<p>Red Hat OpenShift support for Windows Containers is not available on Azure Red Hat OpenShift with hosted control planes at this time.</p>
<h3 id="container-engine">Container engine</h3>
<p>Azure Red Hat OpenShift with hosted control planes runs on OpenShift 4 and uses <a href="https://www.redhat.com/en/blog/red-hat-openshift-container-platform-4-now-defaults-cri-o-underlying-container-engine">CRI-O</a> as the only available container engine.</p>
<h3 id="operating-system">Operating system</h3>
<p>Azure Red Hat OpenShift with hosted control planes runs on OpenShift 4 and uses Red Hat CoreOS as the operating system for all control plane and worker nodes.</p>
<h3 id="red-hat-operator-support">Red Hat Operator support</h3>
<p>Red Hat workloads typically refer to Red Hat-provided Operators made available through Operator Hub. Red Hat workloads are not managed by the Red Hat SRE team, and must be deployed on worker nodes. These Operators may require additional Red Hat subscriptions, and may incur additional cloud infrastructure costs. Examples of these Red Hat-provided Operators are:</p>
<ul>
<li>Red Hat Quay</li>
<li>Red Hat Advanced Cluster Management</li>
<li>Red Hat Advanced Cluster Security</li>
<li>Red Hat OpenShift Service Mesh</li>
<li>OpenShift Serverless</li>
<li>Red Hat OpenShift Logging</li>
<li>Red Hat OpenShift Pipelines</li>
</ul>
<h3 id="kubernetes-operator-support">Kubernetes Operator support</h3>
<p>All Operators listed in the OperatorHub marketplace should be available for installation. These Operators are considered customer workloads, and are not monitored by Red Hat SRE.</p>
<h2 id="security">Security</h2>
<p>This section provides information about the service definition for Azure Red Hat OpenShift with hosted control planes security.</p>
<h3 id="authentication-provider">Authentication provider</h3>
<p>Authentication for the cluster can be configured using either ARM API or Azure CLI. Azure Red Hat OpenShift with hosted control planes is not an identity provider, and all access to the cluster must be managed by the customer as part of their integrated solution. The use of multiple identity providers provisioned at the same time is supported.</p>
<h3 id="privileged-containers">Privileged containers</h3>
<p>Privileged containers are available for users with the <code>cluster-admin</code> role. Usage of privileged containers as <code>cluster-admin</code> is subject to the responsibilities and exclusion notes in the <a href="https://www.redhat.com/en/about/agreements">Red Hat Enterprise Agreement Appendix 4</a> (Online Subscription Services).</p>
<h3 id="cluster-administration-role">Cluster administration role</h3>
<p>The administrator of Azure Red Hat OpenShift with hosted control planes has default access to the <code>cluster-admin</code> role for your organization’s cluster. While logged into an account with the <code>cluster-admin</code> role, users have increased permissions to run privileged security contexts.</p>
<h3 id="project-self-service">Project self-service</h3>
<p>By default, all users have the ability to create, update, and delete their projects. This can be restricted if a member of the <code>dedicated-admin</code> group removes the <code>self-provisioner</code> role from authenticated users:</p>
<pre><code class="lang-console">$ oc adm policy remove-cluster-role-from-group self-provisioner system:authenticated:oauth
</code></pre>
<p>Restrictions can be reverted by applying:</p>
<pre><code class="lang-console">$ oc adm policy add-cluster-role-to-group self-provisioner system:authenticated:oauth
</code></pre>
<h3 id="network-security">Network security</h3>
<p>With Azure Red Hat OpenShift with hosted control planes, Azure provides a standard DDoS protection on all load balancers, called Azure DDoS. This provides 95% protection against most commonly used level 3 and 4 attacks on all the public facing load balancers used for Azure Red Hat OpenShift with hosted control planes. A 10-second timeout is added for HTTP requests coming to the <code>haproxy</code> router to receive a response or the connection is closed to provide additional protection.</p>
<h2 id="virtual-machine-sizes">Virtual machine sizes</h2>
<p>For a list of available worker node virtual machine types and sizes, see <a href="https://learn.microsoft.com/en-us/azure/openshift/support-policies-v4#worker-nodes">Worker nodes</a>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Microsoft Azure Red Hat OpenShift with hosted control planes supports a maximum of 500 worker nodes. |</p>
</div>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/bhardesty/aro-hcp-doc-demo/blob/main/docfx_project/docs/service-def.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
